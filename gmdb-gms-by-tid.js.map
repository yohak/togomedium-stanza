{"version":3,"file":"gmdb-gms-by-tid.js","sources":["../../../home/runner/work/togomedium-stanza/togomedium-stanza/stanzas/gmdb-gms-by-tid/index.ts"],"sourcesContent":["import * as d3 from \"d3\";\nimport Stanza from \"togostanza/stanza\";\nimport { addClass } from \"yohak-tools\";\nimport { getData } from \"../../shared/utils/getData\";\nimport { URL_API } from \"../../shared/utils/variables\";\n\ntype D3Selection = d3.Selection<any, any, any, any>;\n\nlet mouseX = 0;\nlet mouseY = 0;\ndocument.body.addEventListener(\"mousemove\", function (e) {\n  // console.log(e);\n  mouseX = e.clientX;\n  mouseY = e.clientY;\n});\n\nexport default class GmdbGmsByTid extends Stanza<StanzaParameters> {\n  async render() {\n    const params = this.params;\n    const apiName = \"gms_by_kegg_tids_3\";\n    const result = await getData<ApiBody>(`${URL_API}${apiName}`, {\n      t_id: params.t_id,\n    });\n\n    const { sorted_groups } = processData(result.body);\n    this.renderTemplate<TemplateParameters>({ template: \"stanza.html.hbs\", parameters: {} });\n    const wrapper = this.root.querySelector<HTMLElement>(\"#table_area\");\n\n    if (wrapper) {\n      makeTable(wrapper, result.body!, sorted_groups);\n    }\n  }\n}\n\nconst processData = (json: any) => {\n  const group_count: any = {};\n  const group_label: any = {};\n  for (const gm of json.growth_media) {\n    const groups = Object.keys(gm.components_group);\n    for (const group of groups) {\n      if (!group_count[group]) {\n        group_count[group] = 0;\n        group_label[group] = gm.components_group[group].label;\n      }\n      group_count[group]++;\n    }\n  }\n\n  // sort component_group by component count\n  const groups = Object.keys(group_count).map(function (group) {\n    return { uri: group, count: group_count[group], label: group_label[group] };\n  });\n  const sorted_groups = groups.sort(function (a, b) {\n    if (a.count > b.count) {\n      return -1;\n    }\n    if (a.count < b.count) {\n      return 1;\n    }\n    return 0;\n  });\n\n  // hash to list 'components_group'\n  for (const gm of json.growth_media) {\n    gm.components_group_list = [];\n    for (const group of sorted_groups) {\n      if (gm.components_group[group.uri]) {\n        gm.components_group_list.push({\n          elements: gm.components_group[group.uri].elements,\n        });\n      } else {\n        gm.components_group_list.push({ elements: [] });\n      }\n    }\n  }\n\n  return { sorted_groups };\n};\n\nconst makeTable = (div: HTMLElement, data: ApiBody, sorted_groups: any) => {\n  const renderDiv: D3Selection = d3.select(div);\n  const mainTable: D3Selection = renderDiv.append(\"table\");\n  const popup: D3Selection = renderDiv\n    .append(\"div\")\n    .attr(\"id\", \"popup\")\n    .style(\"display\", \"none\")\n    .style(\"position\", \"fixed\")\n    .style(\"padding\", \"10px\")\n    .style(\"background-color\", \"rgba(255,255,255,0.75)\")\n    .style(\"border\", \"solid 2px #888888\")\n    .style(\"max-width\", \"300px\")\n    .style(\"z-index\", 10);\n\n  // thead\n  const thead: D3Selection = mainTable.append(\"thead\");\n  let tr: D3Selection = thead.append(\"tr\");\n  tr.append(\"th\").attr(\"class\", \"header\").text(\"Medium\");\n  tr.append(\"th\").attr(\"class\", \"header\").text(\"Organisms\");\n  tr.append(\"th\").attr(\"class\", \"header\").attr(\"colspan\", sorted_groups.length).text(\"Components\");\n  tr = thead.append(\"tr\");\n  tr.append(\"th\");\n  tr.append(\"th\");\n  tr.selectAll(\".role_component\")\n    .data(sorted_groups)\n    .enter()\n    .append(\"th\")\n    .attr(\"class\", \"role_component\")\n    .append(\"a\")\n    .attr(\"href\", function (d: any) {\n      return \"/component/\" + d.uri.replace(\"http://purl.jp/bio/10/gmo/\", \"\");\n    })\n    .append(\"div\")\n    .attr(\"class\", \"entypo-db-shape role_component_style\")\n    .on(\"mouseover\", function (e, d: any) {\n      renderDiv\n        .select(\"#popup\")\n        .style(\"left\", mouseX + 10 + \"px\")\n        .style(\"top\", mouseY - 10 + \"px\")\n        .style(\"display\", \"block\")\n        .text(d.label);\n    })\n    .on(\"mouseout\", function (d) {\n      renderDiv.select(\"#popup\").style(\"display\", \"none\");\n    });\n\n  // tbody\n  const tbody = mainTable.append(\"tbody\");\n  tr = tbody\n    .selectAll(\".organism_line\")\n    .data(data.growth_media)\n    .enter()\n    .append(\"tr\")\n    .attr(\"class\", \"organism_line\");\n  tr.append(\"td\")\n    .attr(\"class\", \"medium\")\n    .append(\"a\")\n    .attr(\"href\", function (d: any) {\n      return \"/medium/\" + d.uri.replace(\"http://purl.jp/bio/10/gm/\", \"\");\n    })\n    .text(function (d: any) {\n      return d.uri.replace(\"http://purl.jp/bio/10/gm/\", \"\");\n    })\n    .on(\"mouseover\", function (d) {\n      renderDiv\n        .select(\"#popup\")\n        .style(\"left\", mouseX + 10 + \"px\")\n        .style(\"top\", mouseY - 10 + \"px\")\n        .style(\"display\", \"block\")\n        .text(d.label);\n    })\n    .on(\"mouseout\", function (d) {\n      renderDiv.select(\"#popup\").style(\"display\", \"none\");\n    });\n  tr.append(\"td\")\n    .attr(\"class\", \"organism\")\n    .html(function (d: any) {\n      return d.species.map((x: any) => x.tid).join(\"<br>\");\n    })\n    .on(\"mouseover\", function (d) {\n      renderDiv\n        .select(\"#popup\")\n        .style(\"left\", mouseX + 10 + \"px\")\n        .style(\"top\", mouseY - 10 + \"px\")\n        .style(\"display\", \"block\")\n        .html(d.species.map((x: any) => x.label).join(\"<br>\"));\n    })\n    .on(\"mouseout\", function (d) {\n      renderDiv.select(\"#popup\").style(\"display\", \"none\");\n    });\n\n  const td = tr\n    .selectAll(\".component\")\n    .data(function (d: any) {\n      return d.components_group_list;\n    })\n    .enter()\n    .append(\"td\")\n    .attr(\"class\", \"component\")\n    .filter(function (d: any) {\n      return d.elements[0];\n    })\n    .selectAll(\".medium_list\")\n    .data(function (d: any) {\n      return d.elements;\n    })\n    .enter()\n    .append(\"a\")\n    .attr(\"class\", \"medium_list\")\n    .attr(\"href\", function (d: any) {\n      return \"/component/\" + d.component.uri.replace(\"http://purl.jp/bio/10/gmo/\", \"\");\n    })\n    .append(\"div\")\n    .attr(\"class\", \"entypo-db-shape component_style\")\n    .on(\"mouseover\", function (e, d: any) {\n      renderDiv\n        .select(\"#popup\")\n        .style(\"left\", mouseX + 10 + \"px\")\n        .style(\"top\", mouseY - 10 + \"px\")\n        .style(\"display\", \"block\")\n        .text(d.component.label);\n    })\n    .on(\"mouseout\", function (d) {\n      renderDiv.select(\"#popup\").style(\"display\", \"none\");\n    });\n\n  // tfoot\n  const tfoot = mainTable.append(\"tfoot\");\n  tr = tfoot.append(\"tr\");\n  tr.append(\"td\");\n  tr.append(\"td\");\n  tr.selectAll(\".component_label\")\n    .data(sorted_groups)\n    .enter()\n    .append(\"td\")\n    .attr(\"class\", \"component_label\")\n    .append(\"p\")\n    .text(function (d: any) {\n      return d.label;\n    });\n\n  const subTable = makeSubTable(renderDiv, data);\n  fitSubTableHeight(mainTable.node(), subTable.node()!);\n  makeScrollable(renderDiv.node(), mainTable.node(), subTable.node()!);\n};\n\nconst _makeSubTable = (data: ApiBody) => {\n  const subTable: HTMLTableElement = document.createElement(\"table\");\n  addClass(subTable, \"sub-table\");\n  //\n  const thead: HTMLTableSectionElement = document.createElement(\"thead\");\n  subTable.append(thead);\n  //\n  const headRow: HTMLTableRowElement = document.createElement(\"tr\");\n  thead.append(headRow);\n};\n\nconst makeSubTable = (renderDiv: D3Selection, data: ApiBody) => {\n  const subTable = renderDiv.append(\"table\");\n  subTable.classed(\"sub-table\", true);\n\n  const thead = subTable.append(\"thead\");\n  let tr = thead.append(\"tr\");\n  tr.append(\"th\").attr(\"class\", \"header\").text(\"Medium\");\n  tr.append(\"th\").attr(\"class\", \"header\").text(\"Organisms\");\n  tr = thead.append(\"tr\");\n  tr.append(\"th\");\n  tr.append(\"th\");\n\n  // tbody\n  const tbody = subTable.append(\"tbody\");\n  tr = tbody\n    .selectAll(\".organism_line\")\n    .data(data.growth_media)\n    .enter()\n    .append(\"tr\")\n    .attr(\"class\", \"organism_line\");\n  tr.append(\"td\")\n    .attr(\"class\", \"medium\")\n    .append(\"a\")\n    .attr(\"href\", (d) => {\n      return \"/medium/\" + d.uri.replace(\"http://purl.jp/bio/10/gm/\", \"\");\n    })\n    .text((d) => {\n      return d.uri.replace(\"http://purl.jp/bio/10/gm/\", \"\");\n    })\n    .on(\"mouseover\", (e, d) => {\n      renderDiv\n        .select(\"#popup\")\n        .style(\"left\", mouseX + 10 + \"px\")\n        .style(\"top\", mouseY - 10 + \"px\")\n        .style(\"display\", \"block\")\n        .text(d.label);\n    })\n    .on(\"mouseout\", (e, d) => {\n      renderDiv.select(\"#popup\").style(\"display\", \"none\");\n    });\n  tr.append(\"td\")\n    .attr(\"class\", \"organism\")\n    .html((d) => {\n      return d.species.map((x: any) => x.tid).join(\"<br>\");\n    })\n    .on(\"mouseover\", (e, d: any) => {\n      renderDiv\n        .select(\"#popup\")\n        .style(\"left\", mouseX + 10 + \"px\")\n        .style(\"top\", mouseY - 10 + \"px\")\n        .style(\"display\", \"block\")\n        .html(d.species.map((x: any) => x.label).join(\"<br>\"));\n    })\n    .on(\"mouseout\", (d) => {\n      renderDiv.select(\"#popup\").style(\"display\", \"none\");\n    });\n\n  const tfoot = subTable.append(\"tfoot\");\n  tr = tfoot.append(\"tr\");\n  tr.append(\"td\");\n  tr.append(\"td\");\n\n  return subTable;\n};\n\nconst fitSubTableHeight = (main: HTMLElement, sub: HTMLElement) => {\n  const header2Height = main\n    .querySelector(\"thead tr:nth-child(2) th\")!\n    .getBoundingClientRect().height;\n  sub.querySelector<HTMLTableHeaderCellElement>(\n    \"thead tr:nth-child(2) th\"\n  )!.style.height = `${header2Height}px`;\n  const footerHeight = main.querySelector(\"tfoot td\")!.getBoundingClientRect().height;\n  sub.querySelector<HTMLTableDataCellElement>(\"tfoot td\")!.style.height = `${footerHeight}px`;\n  const mainBodyRows = main.querySelectorAll<HTMLTableRowElement>(\"tbody tr\");\n  const subBodyRows = sub.querySelectorAll<HTMLTableRowElement>(\"tbody tr\");\n  mainBodyRows.forEach((elm, i) => {\n    const bound = elm.getBoundingClientRect();\n    subBodyRows[i].style.width = `${bound.width}px`;\n    subBodyRows[i].style.height = `${bound.height}px`;\n  });\n};\n\nconst makeScrollable = (wrapper: HTMLElement, main: HTMLElement, sub: HTMLElement) => {\n  const scroller = document.createElement(\"div\");\n  scroller.classList.add(\"scroller\");\n  wrapper.prepend(scroller);\n  scroller.append(main);\n\n  wrapper.style.position = \"relative\";\n  scroller.style.overflowX = \"auto\";\n  sub.style.position = \"absolute\";\n  sub.style.left = \"0\";\n  sub.style.top = \"0\";\n};\n\ninterface StanzaParameters {\n  t_id: string;\n}\n\ninterface TemplateParameters {}\n\ninterface ApiBody {\n  growth_media: GrowthMedia[];\n}\n\ninterface GrowthMedia {\n  uri: string;\n  label: string;\n  species: Species[];\n  components_group: {\n    [key: string]: ComponentsGroup;\n  };\n}\n\ninterface ComponentsGroup {\n  label: string;\n  elements: {\n    component: {\n      uri: string;\n      label: string;\n    };\n    role?: {\n      uri: string;\n      label: string;\n    };\n  }[];\n}\n\ninterface Species {\n  tid: string;\n  label: string;\n}\n"],"names":["d3.select"],"mappings":"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"}