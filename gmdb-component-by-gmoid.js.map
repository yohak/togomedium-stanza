{"version":3,"file":"gmdb-component-by-gmoid.js","sources":["../../../home/runner/work/togomedium-stanza/togomedium-stanza/stanzas/gmdb-component-by-gmoid/index.ts"],"sourcesContent":["import Stanza from \"togostanza/stanza\";\nimport { getData } from \"../../utils/getData\";\nimport { importWebFontForTogoMedium } from \"../../utils/stanza\";\nimport { ApiResponse } from \"../../utils/types\";\nimport { API_GROWTH_MEDIUM } from \"../../utils/variables\";\n\nexport default class GmdbComponentByGmoid extends Stanza<StanzaParameters> {\n  async render() {\n    const params = this.params;\n    if (!params.gmo_id) {\n      return;\n    }\n    const apiName = \"gmdb_component_by_gmoid\";\n    const result = await getData<ApiBody>(`${API_GROWTH_MEDIUM}${apiName}`, {\n      gmo_id: params.gmo_id,\n    });\n\n    const parameters = parseData(result);\n    const template = \"stanza.html.hbs\";\n    this.renderTemplate<TemplateParameters>({ template, parameters });\n    importWebFontForTogoMedium(this);\n  }\n}\n\nconst parseData = (data: ApiResponse<ApiBody>): TemplateParameters => {\n  return makeSuccessData(data.body!);\n};\n\nconst makeSuccessData = (body: ApiBody): TemplateParameters => {\n  return {\n    pref_label: body.pref_label,\n    gmo_id: body.id,\n    alt_labels: body.alt_labels_en,\n    properties: body.properties,\n    roles: body.roles,\n    super_classes: body.super_classes,\n    sub_classes: body.sub_classes,\n    links: body.links\n      .map((str) => ({\n        label: getLinkLabel(str),\n        uri: str,\n      }))\n      .filter((item) => !!item.label),\n  };\n};\n\nconst getLinkLabel = (link: string) => {\n  switch (true) {\n    case /pccompound/.test(link):\n      return \"PubChem\";\n    case /wikipedia/.test(link):\n      return \"Wikipedia\";\n    case /ncicb/.test(link):\n      return \"NCI Thesaurus\";\n    case /CHEBI/.test(link):\n      return \"ChEBI\";\n    case /SNOMEDCT/.test(link):\n      return \"SNOMED-CT\";\n    default:\n      return \"\";\n  }\n};\n\ntype StanzaParameters = {\n  gmo_id: string;\n};\n\ntype TemplateParameters = {\n  pref_label: string;\n  gmo_id: string;\n  alt_labels: string[];\n  properties: ComponentClass[];\n  roles: ComponentClass[];\n  super_classes: ComponentClass[];\n  sub_classes: ComponentClass[];\n  links: LinkInfo[];\n};\n\ntype LinkInfo = {\n  label: string;\n  uri: string;\n};\n\ntype ApiBody = {\n  pref_label: string;\n  id: string;\n  label_ja: string;\n  alt_labels_en: string[];\n  alt_labels_ja: string[];\n  super_classes: ComponentClass[];\n  sub_classes: ComponentClass[];\n  properties: ComponentClass[];\n  roles: ComponentClass[];\n  links: string[];\n};\n\ntype ComponentClass = {\n  gmo_id: string;\n  uri: string;\n  label_en: string;\n};\n"],"names":[],"mappings":";;;;;;MAMqB,oBAAqB,SAAQ,MAAwB;IAClE,MAAM;;YACV,MAAM,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC;YAC3B,IAAI,CAAC,MAAM,CAAC,MAAM,EAAE;gBAClB,OAAO;aACR;YACD,MAAM,OAAO,GAAG,yBAAyB,CAAC;YAC1C,MAAM,MAAM,GAAG,MAAM,OAAO,CAAU,GAAG,iBAAiB,GAAG,OAAO,EAAE,EAAE;gBACtE,MAAM,EAAE,MAAM,CAAC,MAAM;aACtB,CAAC,CAAC;YAEH,MAAM,UAAU,GAAG,SAAS,CAAC,MAAM,CAAC,CAAC;YACrC,MAAM,QAAQ,GAAG,iBAAiB,CAAC;YACnC,IAAI,CAAC,cAAc,CAAqB,EAAE,QAAQ,EAAE,UAAU,EAAE,CAAC,CAAC;YAClE,0BAA0B,CAAC,IAAI,CAAC,CAAC;SAClC;KAAA;CACF;AAED,MAAM,SAAS,GAAG,CAAC,IAA0B;IAC3C,OAAO,eAAe,CAAC,IAAI,CAAC,IAAK,CAAC,CAAC;AACrC,CAAC,CAAC;AAEF,MAAM,eAAe,GAAG,CAAC,IAAa;IACpC,OAAO;QACL,UAAU,EAAE,IAAI,CAAC,UAAU;QAC3B,MAAM,EAAE,IAAI,CAAC,EAAE;QACf,UAAU,EAAE,IAAI,CAAC,aAAa;QAC9B,UAAU,EAAE,IAAI,CAAC,UAAU;QAC3B,KAAK,EAAE,IAAI,CAAC,KAAK;QACjB,aAAa,EAAE,IAAI,CAAC,aAAa;QACjC,WAAW,EAAE,IAAI,CAAC,WAAW;QAC7B,KAAK,EAAE,IAAI,CAAC,KAAK;aACd,GAAG,CAAC,CAAC,GAAG,MAAM;YACb,KAAK,EAAE,YAAY,CAAC,GAAG,CAAC;YACxB,GAAG,EAAE,GAAG;SACT,CAAC,CAAC;aACF,MAAM,CAAC,CAAC,IAAI,KAAK,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC;KAClC,CAAC;AACJ,CAAC,CAAC;AAEF,MAAM,YAAY,GAAG,CAAC,IAAY;IAChC,QAAQ,IAAI;QACV,KAAK,YAAY,CAAC,IAAI,CAAC,IAAI,CAAC;YAC1B,OAAO,SAAS,CAAC;QACnB,KAAK,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC;YACzB,OAAO,WAAW,CAAC;QACrB,KAAK,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC;YACrB,OAAO,eAAe,CAAC;QACzB,KAAK,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC;YACrB,OAAO,OAAO,CAAC;QACjB,KAAK,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC;YACxB,OAAO,WAAW,CAAC;QACrB;YACE,OAAO,EAAE,CAAC;KACb;AACH,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}