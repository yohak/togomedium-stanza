{"version":3,"file":"gmdb-component-by-gmoid.js","sources":["../../../home/runner/work/togomedium-stanza/togomedium-stanza/stanzas/gmdb-component-by-gmoid/index.ts"],"sourcesContent":["import Stanza from \"togostanza/stanza\";\nimport { getData } from \"../../shared/utils/getData\";\nimport { importWebFontForTogoMedium } from \"../../shared/utils/stanza\";\nimport { ApiResponse } from \"../../shared/utils/types\";\nimport { URL_API } from \"../../shared/utils/variables\";\n\nexport default class GmdbComponentByGmoid extends Stanza<StanzaParameters> {\n  async render() {\n    const params = this.params;\n    if (!params.gmo_id) {\n      return;\n    }\n    const apiName = \"gmdb_component_by_gmoid\";\n    const result = await getData<ApiBody>(`${URL_API}${apiName}`, {\n      gmo_id: params.gmo_id,\n    });\n\n    const parameters = parseData(result);\n    const template = \"stanza.html.hbs\";\n    this.renderTemplate<TemplateParameters>({ template, parameters });\n    importWebFontForTogoMedium(this);\n  }\n}\n\nconst parseData = (data: ApiResponse<ApiBody>): TemplateParameters => {\n  return makeSuccessData(data.body!);\n};\n\nconst makeSuccessData = (body: ApiBody): TemplateParameters => {\n  return {\n    pref_label: body.pref_label,\n    gmo_id: body.id,\n    alt_labels: body.alt_labels_en,\n    properties: body.properties,\n    roles: body.roles,\n    super_classes: body.super_classes,\n    sub_classes: body.sub_classes,\n    links: body.links\n      .map((str) => ({\n        label: getLinkLabel(str),\n        uri: str,\n      }))\n      .filter((item) => !!item.label),\n  };\n};\n\nconst getLinkLabel = (link: string) => {\n  switch (true) {\n    case /pccompound/.test(link):\n      return \"PubChem\";\n    case /wikipedia/.test(link):\n      return \"Wikipedia\";\n    case /ncicb/.test(link):\n      return \"NCI Thesaurus\";\n    case /CHEBI/.test(link):\n      return \"ChEBI\";\n    case /SNOMEDCT/.test(link):\n      return \"SNOMED-CT\";\n    default:\n      return \"\";\n  }\n};\n\ntype StanzaParameters = {\n  gmo_id: string;\n};\n\ntype TemplateParameters = {\n  pref_label: string;\n  gmo_id: string;\n  alt_labels: string[];\n  properties: ComponentClass[];\n  roles: ComponentClass[];\n  super_classes: ComponentClass[];\n  sub_classes: ComponentClass[];\n  links: LinkInfo[];\n};\n\ntype LinkInfo = {\n  label: string;\n  uri: string;\n};\n\ntype ApiBody = {\n  pref_label: string;\n  id: string;\n  label_ja: string;\n  alt_labels_en: string[];\n  alt_labels_ja: string[];\n  super_classes: ComponentClass[];\n  sub_classes: ComponentClass[];\n  properties: ComponentClass[];\n  roles: ComponentClass[];\n  links: string[];\n};\n\ntype ComponentClass = {\n  gmo_id: string;\n  uri: string;\n  label_en: string;\n};\n"],"names":[],"mappings":";;;;;;AAMqB,MAAA,oBAAqB,SAAQ,MAAwB,CAAA;IAClE,MAAM,GAAA;;AACV,YAAA,MAAM,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC;AAC3B,YAAA,IAAI,CAAC,MAAM,CAAC,MAAM,EAAE;gBAClB,OAAO;AACR,aAAA;YACD,MAAM,OAAO,GAAG,yBAAyB,CAAC;YAC1C,MAAM,MAAM,GAAG,MAAM,OAAO,CAAU,GAAG,OAAO,CAAA,EAAG,OAAO,CAAA,CAAE,EAAE;gBAC5D,MAAM,EAAE,MAAM,CAAC,MAAM;AACtB,aAAA,CAAC,CAAC;AAEH,YAAA,MAAM,UAAU,GAAG,SAAS,CAAC,MAAM,CAAC,CAAC;YACrC,MAAM,QAAQ,GAAG,iBAAiB,CAAC;YACnC,IAAI,CAAC,cAAc,CAAqB,EAAE,QAAQ,EAAE,UAAU,EAAE,CAAC,CAAC;YAClE,0BAA0B,CAAC,IAAI,CAAC,CAAC;SAClC,CAAA,CAAA;AAAA,KAAA;AACF,CAAA;AAED,MAAM,SAAS,GAAG,CAAC,IAA0B,KAAwB;AACnE,IAAA,OAAO,eAAe,CAAC,IAAI,CAAC,IAAK,CAAC,CAAC;AACrC,CAAC,CAAC;AAEF,MAAM,eAAe,GAAG,CAAC,IAAa,KAAwB;IAC5D,OAAO;QACL,UAAU,EAAE,IAAI,CAAC,UAAU;QAC3B,MAAM,EAAE,IAAI,CAAC,EAAE;QACf,UAAU,EAAE,IAAI,CAAC,aAAa;QAC9B,UAAU,EAAE,IAAI,CAAC,UAAU;QAC3B,KAAK,EAAE,IAAI,CAAC,KAAK;QACjB,aAAa,EAAE,IAAI,CAAC,aAAa;QACjC,WAAW,EAAE,IAAI,CAAC,WAAW;QAC7B,KAAK,EAAE,IAAI,CAAC,KAAK;AACd,aAAA,GAAG,CAAC,CAAC,GAAG,MAAM;AACb,YAAA,KAAK,EAAE,YAAY,CAAC,GAAG,CAAC;AACxB,YAAA,GAAG,EAAE,GAAG;AACT,SAAA,CAAC,CAAC;aACF,MAAM,CAAC,CAAC,IAAI,KAAK,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC;KAClC,CAAC;AACJ,CAAC,CAAC;AAEF,MAAM,YAAY,GAAG,CAAC,IAAY,KAAI;AACpC,IAAA,QAAQ,IAAI;AACV,QAAA,KAAK,YAAY,CAAC,IAAI,CAAC,IAAI,CAAC;AAC1B,YAAA,OAAO,SAAS,CAAC;AACnB,QAAA,KAAK,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC;AACzB,YAAA,OAAO,WAAW,CAAC;AACrB,QAAA,KAAK,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC;AACrB,YAAA,OAAO,eAAe,CAAC;AACzB,QAAA,KAAK,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC;AACrB,YAAA,OAAO,OAAO,CAAC;AACjB,QAAA,KAAK,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC;AACxB,YAAA,OAAO,WAAW,CAAC;AACrB,QAAA;AACE,YAAA,OAAO,EAAE,CAAC;AACb,KAAA;AACH,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}